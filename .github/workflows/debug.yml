---

name: "Debug Workflow Run"
run-name: "Debug Workflow Run"
permissions: read-all

on:
  repository_dispatch:
  workflow_dispatch:
  pull_request:
  push:
    paths: ['.github/workflows/debug.yml']

env:
  GH_TOKEN: ${{ secret.token }}

jobs:

  debug-tor:
    runs-on: ubuntu-latest
    steps:
      - run: sudo apt install -y tor
      - run: curl --proxy socks5h://localhost:9050 https://check.torproject.org/api/ip | jq

  debug-artifacts:
    runs-on: ubuntu-latest
    steps:
      - run: date +%s > test.txt
      - id: upload-artifact
        uses: actions/upload-artifact@v4
        with:
          path: test.txt
      - run: gh api "${ENDPOINT}"
        env:
          ENDPOINT: /repos/${{ github.repository }}/actions/artifacts/${{ steps.upload-artifact.outputs.artifact-id }}/zip
